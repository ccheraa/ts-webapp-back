{"version":3,"file":"controller.js","sourceRoot":"","sources":["../../src/server/controller.ts"],"names":[],"mappings":";AAAA,mCAA8D;AAC9D,iCAAgC;AAChC;IAEE,oBAAmB,IAAkB,EAAS,MAAoB;QAA/C,qBAAA,EAAA,UAAkB;QAAS,uBAAA,EAAA,WAAoB;QAA/C,SAAI,GAAJ,IAAI,CAAc;QAAS,WAAM,GAAN,MAAM,CAAc;QAD3D,WAAM,GAAW,gBAAM,EAAE,CAAC;IACoC,CAAC;IAC/D,wBAAG,GAAV,UAAW,GAAmB,EAAE,GAAiB,EAAE,MAAsB;QAAzC,oBAAA,EAAA,SAAiB;QAAE,uBAAA,EAAA,cAAsB;QACvE,IAAI,KAAK,GAAG,aAAK,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACxB,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IACM,0BAAK,GAAZ,UAAa,GAAgB;QAA7B,iBAOC;QANC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,KAAK;YACxB,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,UAAC,MAAM,EAAE,MAAM;gBACnC,CAAA,KAAA,KAAI,CAAC,MAAM,CAAA,CAAC,MAAM,CAAC,YAAC,KAAK,CAAC,GAAG,SAAK,MAAM,CAAC,MAAM,CAAC,UAAA,KAAK,IAAI,OAAA,CAAC,CAAC,KAAK,EAAP,CAAO,CAAC,GAAE;;YACrE,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,MAAM,KAAK,IAAI,IAAI,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;IAC1D,CAAC;IACH,iBAAC;AAAD,CAAC,AAhBD,IAgBC;AAhBY,gCAAU","sourcesContent":["import { Router, RequestHandler, Application } from 'express';\r\nimport { Route } from './route';\r\nexport class Controller {\r\n  public router: Router = Router();\r\n  constructor(public base: string = '/', public routes: Route[] = []) {}\r\n  public add(fun: RequestHandler, url: string = '/', method: string = 'get') {\r\n    let route = Route.create(fun, url, method);\r\n    this.routes.push(route);\r\n    return route;\r\n  }\r\n  public setup(app: Application): void {\r\n    this.routes.forEach((route) => {\r\n      route.handles.forEach((handle, method) => {\r\n        this.router[method](route.url, ...handle.filter(route => !!route));\r\n      });\r\n    });\r\n    this.router === null || app.use(this.base, this.router);\r\n  }\r\n}"]}